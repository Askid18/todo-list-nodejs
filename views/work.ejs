<%- include("partials/header.ejs") %>

<main class="container">
    <div class="heading">
        <div>
            <h1><%= thisDay %></h1>
        </div>
    </div>

   <div class="tasks-section">
        <h2>My To-Do Lists</h2>
        <div class="form-section">
            <form action="/add-task" method="post">
                <input type="text" name="newTask" placeholder="Add a new task" required>
                <input type="hidden" name="list" value="Today">
                <button type="submit">Add</button>
             </form>
        </div>
   

         <div class="task-list">
            <h3><%= title %></h3>
            <ul>
                <% tasks.forEach(function(task, index) { %>
                    <li>
                        <input type="checkbox" id="task-<%= index %>" class="task-checkbox">
                        <label for="task-<%= index %>"><%= task %></label>
                    </li>
                <% }); %>
            </ul>
        </div>
    </div>
</main>

<%- include("partials/footer.ejs") %>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const checkboxes = document.querySelectorAll(".task-checkbox");
    checkboxes.forEach(cb => {
      cb.addEventListener("change", () => {
        cb.nextElementSibling.classList.toggle("completed");
      });
    });
  });
</script>
